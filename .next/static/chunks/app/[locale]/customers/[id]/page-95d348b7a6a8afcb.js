(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{32434:(e,t,s)=>{Promise.resolve().then(s.bind(s,92417))},35169:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},79323:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});var r=s(23464);class o{static async login(e){try{return(await r.A.post("".concat(this.BASE_URL,"/auth/login"),{userNameOrEmailAddress:e.userNameOrEmailAddress,password:e.password,rememberMe:e.rememberMe},{headers:{"Content-Type":"application/json"}})).data}catch(e){var t,s,o;throw console.error("AuthService login error:",e),Error((null==(o=e.response)||null==(s=o.data)||null==(t=s.error)?void 0:t.message)||"فشل في الاتصال بالخادم")}}static saveToken(e,t,s){if(localStorage.setItem(this.TOKEN_KEY,e),t&&localStorage.setItem(this.REFRESH_TOKEN_KEY,t),s){let e=Date.now()+1e3*s;localStorage.setItem(this.TOKEN_EXPIRY_KEY,e.toString())}}static getToken(){{let e=localStorage.getItem(this.TOKEN_KEY);return(console.log("\uD83D\uDD11 AuthService.getToken() called:",{tokenExists:!!e,tokenPreview:(null==e?void 0:e.substring(0,30))+"...",isExpired:!!e&&this.isTokenExpired()}),e&&this.isTokenExpired())?(console.log("⚠️ Token expired, attempting refresh..."),null):e}}static saveUser(e){localStorage.setItem(this.USER_KEY,JSON.stringify(e))}static getUser(){{let e=localStorage.getItem(this.USER_KEY);return e?JSON.parse(e):null}}static logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.TOKEN_EXPIRY_KEY),localStorage.removeItem(this.USER_KEY)}static getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}static isTokenExpired(){{let e=localStorage.getItem(this.TOKEN_EXPIRY_KEY);if(e)return Date.now()>parseInt(e)}return!1}static getTokenExpiryTime(){{let e=localStorage.getItem(this.TOKEN_EXPIRY_KEY);return e?parseInt(e):null}}static isAuthenticated(){return null!==this.getToken()&&!this.isTokenExpired()}static getAuthHeaders(){let e=this.getToken();return e?{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}:{"Content-Type":"application/json"}}}o.BASE_URL="/api",o.TOKEN_KEY="authToken",o.REFRESH_TOKEN_KEY="refreshToken",o.TOKEN_EXPIRY_KEY="tokenExpiry",o.USER_KEY="userInfo",r.A.interceptors.request.use(e=>{let t=o.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.A.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(o.logout(),window.location.href="/login"),Promise.reject(e)})},90697:(e,t,s)=>{"use strict";s.d(t,{FH:()=>l,uE:()=>a,xU:()=>i});var r=s(23464),o=s(79323);let a=(()=>{let e=r.A.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use(e=>{var t;let s=o.u.getToken();return console.log("\uD83D\uDD0D Token retrieved:",s?"Found":"Not found",(null==s?void 0:s.substring(0,20))+"..."),s?(e.headers.Authorization="Bearer ".concat(s),console.log("✅ Authorization header set")):console.log("❌ No token found, Authorization header not set"),console.log("API Request:",{method:null==(t=e.method)?void 0:t.toUpperCase(),url:e.url,headers:e.headers,data:e.data}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),e.interceptors.response.use(e=>(console.log("API Response:",{status:e.status,statusText:e.statusText,data:e.data}),e),e=>{var t;if(console.error("Response interceptor error:",e),(null==(t=e.response)?void 0:t.status)===401){console.log("Unauthorized access, logging out..."),o.u.logout();{let e=window.location.pathname.split("/")[1]||"ar";window.location.href="/".concat(e,"/login")}}return Promise.reject(e)}),e})(),n=r.A.create({baseURL:"https://neosending.com/api",timeout:15e3,headers:{"Content-Type":"application/json",Accept:"text/plain","User-Agent":"NeoSend-Client/1.0"}});n.interceptors.request.use(e=>{var t;let s=o.u.getToken();return s&&(e.headers.Authorization="Bearer ".concat(s)),console.log("NeoSend API Request:",{method:null==(t=e.method)?void 0:t.toUpperCase(),url:e.url,headers:e.headers}),e},e=>(console.error("NeoSend request error:",e),Promise.reject(e))),n.interceptors.response.use(e=>(console.log("NeoSend API Response:",{status:e.status,statusText:e.statusText,data:e.data}),e),e=>(console.error("NeoSend response error:",e),Promise.reject(e)));let l={get:(e,t)=>a.get(e,t),post:(e,t,s)=>a.post(e,t,s),put:(e,t,s)=>a.put(e,t,s),delete:(e,t)=>a.delete(e,t),patch:(e,t,s)=>a.patch(e,t,s)},i={get:(e,t)=>n.get(e,t),post:(e,t,s)=>n.post(e,t,s),put:(e,t,s)=>n.put(e,t,s),delete:(e,t)=>n.delete(e,t)}},92417:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(95155),o=s(17652),a=s(72797),n=s(35695),l=s(35169),i=s(6874),c=s.n(i),d=s(12115),u=s(90697),h=s(13568);function m(e){let{params:t}=e,s=(0,o.c3)("Customers"),i=(0,a.Ym)(),m=(0,n.useRouter)(),[p,g]=(0,d.useState)(null),[x,E]=(0,d.useState)(!0);return((0,d.useEffect)(()=>{(null==t?void 0:t.id)&&(async()=>{try{let e=(await u.uE.get("/customers/".concat(t.id))).data;if(!e.success)throw Error(e.error||"Failed to fetch customer");g(e.data)}catch(r){var e,s;console.error("Fetch error:",r);let t=(null==(s=r.response)||null==(e=s.data)?void 0:e.error)||r.message||"Failed to fetch customer";h.Ay.error(t)}finally{E(!1)}})()},[null==t?void 0:t.id]),x)?(0,r.jsx)("div",{children:"Loading..."}):p?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[80vh] bg-[#f9fafb] dark:bg-gray-950 px-2",children:(0,r.jsxs)("div",{className:"w-full max-w-xl bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center mb-6 gap-2",children:[(0,r.jsx)(c(),{href:"/".concat(i,"/customers"),className:"text-[#2563eb] hover:text-[#1d4ed8] transition",children:(0,r.jsx)(l.A,{className:"h-5 w-5"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#2563eb] dark:text-[#60a5fa]",children:s("customerDetails")})]}),(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Customer Details"}),(0,r.jsx)("button",{onClick:()=>m.push("/".concat(i,"/customers/").concat(t.id,"/edit")),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Personal Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Full Name"}),(0,r.jsx)("p",{children:p.fullName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Company"}),(0,r.jsx)("p",{children:p.companyName||"-"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Contact Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Mobile Number"}),(0,r.jsx)("p",{children:p.mobileNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Master Mobile"}),(0,r.jsx)("p",{children:p.masterMobileNumber||"-"})]})]})]})]})]})}):(0,r.jsx)("div",{children:"Customer not found"})}}},e=>{e.O(0,[150,641,794,665,568,441,964,358],()=>e(e.s=32434)),_N_E=e.O()}]);