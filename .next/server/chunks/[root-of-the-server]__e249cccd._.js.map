{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///C:/wamp64/www/whatsssss/src/app/api/customers/route.ts"],"sourcesContent":["// src/app/api/customers/route.ts\r\nimport { NextResponse } from 'next/server';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE = 'https://neosending.com/api/neosending/Whatsapp';\r\nconst API_TOKEN = 'Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ3ODA0NjgxQzMzMzc2NUYwMTMwRkQxQzEwRjZBNEM4QjhFMTk5MzAiLCJ4NXQiOiJSNEJHZ2NNemRsOEJNUDBjRVBha3lMamhtVEEiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL25lb3NlbmRpbmcuY29tLyIsImV4cCI6MTc4NDAxNjg5NSwiaWF0IjoxNzUyNDgwODk1LCJhdWQiOiJXaGF0c2FwcCIsInNjb3BlIjoiV2hhdHNhcHAiLCJqdGkiOiIwYzI3ZTkyOS02ODZhLTQxNzMtOTgzZS1jMmVkZjUwZjcyZWQiLCJzdWIiOiI4NGU3MmQ0OC0wNWNlLTJmNzgtYjFiMy0zYTFhZGVhMmIxZTUiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ3ZWIiLCJlbWFpbCI6IndlYkBnbWFpbC5jb20iLCJnaXZlbl9uYW1lIjoid2ViIiwiZmFtaWx5X25hbWUiOiJ0ZXN0IiwicGhvbmVfbnVtYmVyIjoiNzc3Nzc3Nzc3IiwicGhvbmVfbnVtYmVyX3ZlcmlmaWVkIjoiRmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6IkZhbHNlIiwidW5pcXVlX25hbWUiOiJ3ZWIiLCJvaV9wcnN0IjoiV2hhdHNhcHBfQXBwIiwiY2xpZW50X2lkIjoiV2hhdHNhcHBfQXBwIiwib2lfdGtuX2lkIjoiNDI2NTQ2YzUtMjBhYi1hMzhjLTQ1M2UtM2ExYjFhMmQyYjJkIn0.JtO8wstX0e9gayzVKJ1_IuyE7TXJBphM0d4rH1PrUKAbRbebLFqHvKXDOg5IYNMlKcreL4SEF4AH3YNrJuKcCfVY74xXF4sK5dFesHZPPy9p208I6yodzh9tYJ9kBDKnDHTW8OivTsYshy2LO9CweVExgNVdsdKWrYMT4k5u9M9a8oZPWQYyiuh9nyi6Hphx25zMToeojHB-ARBvmp9x4Pi3y6_mqJsEiKO6pSSkajiW4KeDLvyyz6Tr2IlSzBxk2ko_ZwXM5iicueVjhqiLIXkzA8YZEZmCUJyRhAiln14w_gRhqhj-b0VYuJRH-mHNENMHvCDb7EQ4C5ppMgZ-NA';\r\n\r\nexport async function GET() {\r\n  try {\r\n    const response = await axios.get(`${API_BASE}/customer`, {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': API_TOKEN \r\n      },\r\n      timeout: 30000\r\n    });\r\n\r\n    // معالجة الهيكل المختلف للبيانات\r\n    const responseData = response.data;\r\n    let customers = [];\r\n    let totalCount = 0;\r\n\r\n    if (Array.isArray(responseData)) {\r\n      // إذا كانت البيانات مصفوفة مباشرة\r\n      customers = responseData;\r\n      totalCount = responseData.length;\r\n    } else if (responseData.items && Array.isArray(responseData.items)) {\r\n      // إذا كانت البيانات تحتوي على items كصفة\r\n      customers = responseData.items;\r\n      totalCount = responseData.totalCount || responseData.items.length;\r\n    } else if (Array.isArray(responseData.items)) {\r\n      // الهيكل الغريب الذي تتلقاه حالياً\r\n      const firstItem = responseData.items[0];\r\n      customers = firstItem.items || [];\r\n      totalCount = firstItem.totalCount || 0;\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      items: customers,\r\n      totalCount: totalCount\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('API Error:', error);\r\n    return NextResponse.json(\r\n      { \r\n        success: false,\r\n        error: 'Failed to fetch customers',\r\n        details: error instanceof Error ? error.message : String(error)\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const requestData = await request.json();\r\n\r\n    // التحقق من الحقول المطلوبة\r\n    const requiredFields = ['fullName', 'mobileNumber', 'userName', 'password'];\r\n    const missingFields = requiredFields.filter(field => !requestData[field]);\r\n\r\n    if (missingFields.length > 0) {\r\n      return NextResponse.json(\r\n        { \r\n          success: false,\r\n          error: `الحقول التالية مطلوبة: ${missingFields.join(', ')}`\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const response = await axios.post(`${API_BASE}/customer`, requestData, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'text/plain',\r\n        'Authorization': API_TOKEN\r\n      }\r\n    });\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: response.data\r\n    });\r\n\r\n  } catch (error: any) {\r\n    console.error('Error creating customer:', error.response?.data || error.message);\r\n    return NextResponse.json(\r\n      { \r\n        success: false,\r\n        error: 'فشل في إنشاء العميل',\r\n        details: error.response?.data || error.message\r\n      },\r\n      { status: error.response?.status || 500 }\r\n    );\r\n  }\r\n}\r\nexport const dynamic = 'force-dynamic';"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AACjC;AACA;;;AAEA,MAAM,WAAW;AACjB,MAAM,YAAY;AAEX,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,uIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,GAAG,SAAS,SAAS,CAAC,EAAE;YACvD,SAAS;gBACP,UAAU;gBACV,iBAAiB;YACnB;YACA,SAAS;QACX;QAEA,iCAAiC;QACjC,MAAM,eAAe,SAAS,IAAI;QAClC,IAAI,YAAY,EAAE;QAClB,IAAI,aAAa;QAEjB,IAAI,MAAM,OAAO,CAAC,eAAe;YAC/B,kCAAkC;YAClC,YAAY;YACZ,aAAa,aAAa,MAAM;QAClC,OAAO,IAAI,aAAa,KAAK,IAAI,MAAM,OAAO,CAAC,aAAa,KAAK,GAAG;YAClE,yCAAyC;YACzC,YAAY,aAAa,KAAK;YAC9B,aAAa,aAAa,UAAU,IAAI,aAAa,KAAK,CAAC,MAAM;QACnE,OAAO,IAAI,MAAM,OAAO,CAAC,aAAa,KAAK,GAAG;YAC5C,mCAAmC;YACnC,MAAM,YAAY,aAAa,KAAK,CAAC,EAAE;YACvC,YAAY,UAAU,KAAK,IAAI,EAAE;YACjC,aAAa,UAAU,UAAU,IAAI;QACvC;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;YACP,YAAY;QACd;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAC3D,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,cAAc,MAAM,QAAQ,IAAI;QAEtC,4BAA4B;QAC5B,MAAM,iBAAiB;YAAC;YAAY;YAAgB;YAAY;SAAW;QAC3E,MAAM,gBAAgB,eAAe,MAAM,CAAC,CAAA,QAAS,CAAC,WAAW,CAAC,MAAM;QAExE,IAAI,cAAc,MAAM,GAAG,GAAG;YAC5B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,OAAO,CAAC,uBAAuB,EAAE,cAAc,IAAI,CAAC,OAAO;YAC7D,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,MAAM,uIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,GAAG,SAAS,SAAS,CAAC,EAAE,aAAa;YACrE,SAAS;gBACP,gBAAgB;gBAChB,UAAU;gBACV,iBAAiB;YACnB;QACF;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM,SAAS,IAAI;QACrB;IAEF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;QAC/E,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;QAChD,GACA;YAAE,QAAQ,MAAM,QAAQ,EAAE,UAAU;QAAI;IAE5C;AACF;AACO,MAAM,UAAU","debugId":null}}]
}